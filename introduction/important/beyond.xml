<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="beyond" xreflabel="Indo Além do BLFS">
  <?dbhtml filename="beyond.html"?>


  <title>Indo Além do BLFS</title>

  <para>Os pacotes que são instalados neste livro são apenas a ponta do iceberg. Nós
esperamos que a experiência que você ganhou com o livro LFS e com o livro
BLFS te dará o conhecimento necessário para compilar, instalar e configurar
pacotes que não estejam inclusos neste livro.</para>

  <para>Quando você quiser instalar um pacote para um local outro que <filename
class='directory'>/</filename> ou <filename
class='directory'>/usr</filename>, você estará instalando fora das
configurações padrão de ambiente na maioria das máquinas. Os seguintes
exemplos deveriam te auxiliar a determinar como corrigir essa situação. Os
exemplos cobrem o intervalo completo de configurações que possivelmente
precisem de atualização, porém eles não são todo o necessário em cada
situação.</para>

  <itemizedlist>
    <listitem>
      <para>Expanda a <envar>PATH</envar> para incluir <filename
class='directory'>$PREFIX/bin</filename>.</para>
    </listitem>
    <listitem>
      <para>Expanda a <envar>PATH</envar> para o(a) <systemitem
class="username">root</systemitem> para incluir <filename
class='directory'>$PREFIX/sbin</filename>.</para>
    </listitem>
    <listitem>
      <para>Add <filename class='directory'>$PREFIX/lib</filename> to
<filename>/etc/ld.so.conf</filename> or expand
<envar>LD_LIBRARY_PATH</envar> to include it. Before using the latter
option, check out <ulink
url="http://xahlee.info/UnixResource_dir/_/ldpath.html"/>.  If you modify
<filename>/etc/ld.so.conf</filename>, remember to update
<filename>/etc/ld.so.cache</filename> by executing
<command>ldconfig</command> as the <systemitem
class="username">root</systemitem> user.</para>
    </listitem>
    <listitem>
      <para>Adicione <filename class='directory'>$PREFIX/man</filename> ao
<filename>/etc/man_db.conf</filename>; ou expanda <envar>MANPATH</envar>.</para>
    </listitem>
    <listitem>
      <para>Adicione <filename class='directory'>$PREFIX/info</filename> a
<envar>INFOPATH</envar>.</para>
    </listitem>
    <listitem>
      <para>Adicione <filename class='directory'>$PREFIX/lib/pkgconfig</filename> a
<envar>PKG_CONFIG_PATH</envar>. Alguns pacotes agora estão instalando
arquivos <filename class='extension'>.pc</filename> em <filename
class='directory'>$PREFIX/share/pkgconfig</filename>, de forma que você
possivelmente tenha que incluir esse diretório também.</para>
    </listitem>
    <listitem>
      <para>Adicione <filename class='directory'>$PREFIX/include</filename> a
<envar>CPPFLAGS</envar> quando compilar pacotes que dependam do pacote que
você instalou.</para>
    </listitem>
    <listitem>
      <para>Adicione <filename class='directory'>$PREFIX/lib</filename> a
<envar>LDFLAGS</envar> quando compilar pacotes que dependam de uma
biblioteca instalada pelo pacote.</para>
    </listitem>
  </itemizedlist>

  <para>Se você estiver em busca de um pacote que não estiver no livro, [então] as
seguintes são maneiras diferentes que você pode procurar pelo pacote
desejado.</para>

  <itemizedlist>
    <listitem>
      <para>If you know the name of the package, then search SourceForge for it at
<ulink url="https://sourceforge.net/directory/"/>, and search GitHub for it
at <ulink url="https://github.com/"/>.  Also search Google at <ulink
url="https://google.com/"/>. Sometimes a search for the <filename
class='extension'>rpm</filename> at <ulink url="https://rpmfind.net/"/> or
the <filename class='extension'>deb</filename> at <ulink
url="https://www.debian.org/distrib/packages#search_packages"/> can also
lead to a link to the package.</para>
    </listitem>
    <listitem>
      <para>If you know the name of the executable, but not the package that the
executable belongs to, first try a Google search with the name of the
executable. If the results are overwhelming, try searching for the given
executable in the Debian repository at <ulink
url="https://www.debian.org/distrib/packages#search_contents"/>.</para>
    </listitem>
  </itemizedlist>

  <para>Algumas dicas gerais acerca de manusear pacotes novos:</para>

  <itemizedlist>
    <listitem>
      <para>Muitos dos pacotes mais recentes seguem o processo <command>./configure
&amp;&amp; make &amp;&amp; make install</command>. Ajuda acerca das opções
aceitas pelo configure pode ser obtida via o comando <command>./configure
--help</command>.</para>
    </listitem>
    <listitem>
      <para>A maioria dos pacotes contém documentação acerca de compilar e de instalar o
pacote. Alguns dos documentos são excelentes; alguns, não tão
excelentes. Consulte a página do pacote para quaisquer dicas adicionais e
atualizadas para compilar e configurar o pacote.</para>
    </listitem>
    <listitem>
      <para>Se você estiver tendo um problema compilando o pacote, [então] tente
procurar nos arquivamentos do LFS em <ulink
url="https://www.&lfs-domainname;/search.html"/> pelo erro; ou, se isso
falhar, [então] tente procurar no Google. Frequentemente, uma distribuição
já terá solucionado o problema (muitas delas usam versões de desenvolvimento
dos pacotes, de forma que elas veem as mudanças mais breve que aqueles de
nós que normalmente usamos versões estáveis lançadas). Porém, seja
cauteloso(a) - todos(as) os(as) construtores(as) tendem a carregar remendos
que não mais são necessários; e terem correções que somente são exigidas por
causa das escolhas particulares deles(as) em como constroem um pacote. Você
possivelmente tenha que procurar profundamente para encontrar uma correção
para a versão do pacote que estiver tentando usar; ou até mesmo para
encontrar o pacote (os nomes, ocasionalmente, não são o que você poderia
esperar; por exemplo, o <application>ghostscript</application>
frequentemente tem um prefixo ou um sufixo no nome dele); entretanto, as
observações seguintes poderiam ajudar, particularmente aqueles(as) que, como
os(as) editores(as), estão tentando construir as versões mais recentes e
encontrar problemas:</para>
      <itemizedlist>
        <listitem>
          <para>Arch <ulink url="https://www.archlinux.org/packages/"/> - enter the package
name in the 'Keywords' box, select the package name, select the 'Source
Files' field, and then select the <filename>PKGBUILD</filename> entry to see
how they build this package.</para>
        </listitem>
        <listitem>
          <para>Debian <ulink url="https://ftp.debian.org/debian/pool"/> (use your country's
version if there is one) - the source will be in .tar.gz tarballs (either
the original upstream <filename class='extension'>.orig</filename> source,
or else a <filename>dfsg</filename> containing those parts which comply with
debian's free software guidelines) accompanied by versioned .diff.gz or
.tar.gz additions. These additions often show how the package is built, and
may contain patches. In the .diff.gz versions, any patches create files in
<filename class="directory">debian/patches</filename>.</para>
        </listitem>
        <listitem>
          <para>O fonte do pacote do Fedora é reorganizado de tempos em tempos. No momento,
o fonte do pacote para rpms está em <ulink
url="https://src.fedoraproject.org/projects/rpms/%2A"/> e, a partir de lá,
você pode tentar colocando um nome de pacote na caixa de busca. Se o pacote
for encontrado, [então] você pode olhar nos arquivos ("specfile" para
controlar a construção; vários remendos) ou nos commits. Se isso falhar,
[então] você pode baixar um srpm (source rpm) e usar o
<application>rpm2cpio</application> (veja-se a Dica ao final da
página). Para rpms, vá para <ulink
url="https://dl.fedoraproject.org/pub/fedora/linux/"/> e, então, escolha
qual repositório deseja olhar - development/rawhide é o desenvolvimento mais
recente; ou, escolha "releases", para o que foi embarcado em um lançamento;
"updates", para as atualizações para um lançamento; ou, "updates/testing",
para as atualizações mais recentes, que poderiam funcionar ou poderiam ter
problemas.
          </para>
        </listitem>
        <listitem>
          <para>Gentoo - First use a search engine to find an ebuild which looks as if it
will fix the problem, or search at <ulink
url="https://packages.gentoo.org/"/> - use the search field. Note where the
package lives in the portage hierarchy, e.g.
<filename>app-something/</filename>. In general you can treat the ebuild as
a sort of pseudo-code / shell combination with some functions you can hazard
a guess at, such as <command>dodoc</command>. If the fix is just a
<command>sed</command>, try it. However, in most cases the fix will use a
patch. To find the patch, use a gentoo-portage mirror: Two links to mirrors
in the U.S.A. which seem to usually be up to date are <ulink
url="https://mirror.rackspace.com/gentoo-portage/"/> and <ulink
url="https://mirror.steadfast.net/gentoo-portage/"/>. Navigate down the tree
to the package, then to the <filename>files/</filename> directory to look
for the patch. Sometimes a portage mirror has not yet been updated,
particularly for a recent new patch. In a few cases, gentoo batch the
patches into a tarball and the ebuild will have a link in the form
https://dev.gentoo.org/~${PATCH_DEV}/distfiles/${P}-patches-${PATCH_VER}.tar.xz
: here, look for PATCH_DEV and PATCH_VER in the build and format the full
URL in your browser or for wget : remember the '~' before the developer's ID
and note that trying to search the earlier levels of the URL in a browser
may drop you at www.gentoo.org or return 403 (forbidden).
          </para>
        </listitem>
        <listitem>
          <para>openSUSE provide a rolling release, some package versions are in <ulink
url="https://download.opensuse.org/source/tumbleweed/repo/oss/src/"/> but
others are in ../update/openSUSE-current/src - the source only seems to be
available in source rpms.</para>
        </listitem>
        <listitem>
          <para>Slackware - the official package browser is currently broken.  The site at
<ulink url="https://slackbuilds.org/"/> has current and previous versions in
their unofficial repository with links to homepages, downloads, and some
individual files, particularly the <filename>.SlackBuild</filename> files.</para>
        </listitem>
        <listitem>
          <para>Ubuntu <ulink url="ftp://ftp.ubuntu.com/ubuntu/pool/"/> - see the debian
notes above.</para>
        </listitem>
      </itemizedlist>
      <para>Se tudo o mais falhar, [então] tente a lista de discussão blfs-support.</para>
    </listitem>
  </itemizedlist>

  <tip>
    <para>Se você tiver encontrado um pacote que está disponível somente no formato
<filename class='extension'>.deb</filename> ou no <filename
class='extension'>.rpm</filename>, [então] existem dois scripts pequenos,
<command>rpm2targz</command> e <command>deb2targz</command>, que estão
disponíveis em <ulink url="&sources-anduin-http;/extras/deb2targz.tar.bz2"/>
e <ulink url="&sources-anduin-http;/extras/rpm2targz.tar.bz2"/>, para
converter os arquivamentos em um formato simples
<filename>tar.gz</filename>.</para>
    <para>You may also find an rpm2cpio script useful.  The Perl version in the linux
kernel archives at <ulink
url="https://lore.kernel.org/all/20021016121842.GA2292@ncsu.edu/2-rpm2cpio"/>
works for most source rpms.  The rpm2targz script will use an rpm2cpio
script or binary if one is on your path.  Note that rpm2cpio will unpack a
source rpm in the current directory, giving a tarball, a spec file, and
perhaps patches or other files.</para>
  </tip>

</sect1>
