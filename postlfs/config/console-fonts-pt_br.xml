<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<!--

Direitos autorais (Copyright) da versão modificada traduzida para a 
língua portuguesa escrita e falada no Brasil: (c) 2022, 2023 Jamenson 
Ferreira Espindula de Almeida Melo (<jafesp@gmail.com>).

  Este trabalho de tradução do livro "Beyond Linux From Scratch" é 
  classificado pela Free Software Foundation como sendo uma "versão 
  modificada" do mencionado livro.  Em assim sendo, na qualidade de 
  tradutor, produtor da "versão modificada" e titular dos direitos 
  autorais sobre a versão traduzida para a língua portuguesa do livro 
  "Beyond Linux From Scratch", concede-se a seguinte permissão:

  É concedida permissão para copiar, distribuir e (ou) modificar este 
  livro "Beyond Linux From Scratch", versão traduzida para a língua 
  portuguesa, sob os termos da Licença de Documentação Livre GNU, versão 
  1.3 ou qualquer versão posterior publicada pela Free Software 
  Foundation; sem Seções Invariantes, sem Textos de Capa Frontal e sem 
  Textos de Quarta Capa.  Uma cópia da licença está incluída na seção 
  intitulada "Licença de Documentação Livre GNU".
  
# Atenção: todos os documentos aqui publicados são distribuídos sem qualquer garantia, implícita e (ou) explícita.
  
  Permission is granted to copy, distribute and (or) modify this book 
  "Beyond Linux From Scratch", translated into Brazilian Portuguese, 
  under the terms of the GNU Free Documentation License, Version 1.3 or 
  any later version published by the Free Software Foundation; with no 
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A 
  copy of the license is included in the section entitled "GNU Free 
  Documentation License".

# Warning: all the files herein published are released with no warranty, implicit and (or) explicit.

-->

<sect1 id="postlfs-console-fonts" xreflabel="Acerca das Fontes do Console">
  <?dbhtml filename="console-fonts-pt_br.html"?>

  <sect1info>
    <date>$Date$</date>
  </sect1info>

  <title>Acerca das Fontes do Console</title>

  <indexterm zone="postlfs-console-fonts">
    <primary sortas="a-console-fonts">fontes-console</primary>
  </indexterm>

  <para>

    Um sistema LFS pode ser usado sem uma área de trabalho gráfica e, a 
    menos ou até que instale o <xref linkend="x-window-system"/>, você 
    terá que trabalhar no console.  A maioria, se não todos, dos PCs 
    inicializa com uma fonte 8x16 - qualquer que seja o tamanho atual da 
    superfície sobre a qual imagens podem ser projetadas.  Existem umas 
    poucas coisas que você pode fazer para alterar a exibição no 
    console.  A maioria delas envolve mudar a fonte, porém a primeira 
    altera a linha de comando usada pelo grub.

  </para>

  <para condition="html" role="usernotes">Observações de Usuário(a):
  <ulink url="&blfs-wiki;/aboutconsolefonts"/></para>

  <sect2 id="grub-video">

    <title>

      Configurando um tamanho menor de superfície de exibição no grub

    </title>

    <indexterm zone="postlfs-console-fonts grub-video">
      <primary sortas="e-boot-grub-grub-cfg">/boot/grub/grub.cfg</primary>
    </indexterm>

    <para>

      As modernas superfícies sobre as quais imagens podem ser 
      projetadas frequentemente tem muito mais pixeis que as superfícies 
      sobre as quais imagens podem ser projetadas usadas no passado.  Se 
      a sua superfície sobre a qual imagens podem ser projetadas for da 
      largura de mil e seiscentos (1.600) pixeis, [então] uma fonte 8x16 
      te dará 200 colunas de texto - a menos que o seu monitor seja 
      enorme, o texto será pequeno.  Uma das maneiras de se contornar 
      isso é a de se dizer ao grub para usar um tamanho menor, tal como 
      1.024x768; ou 800x600; ou mesmo 640x480.  Mesmo se a sua 
      superfície sobre a qual imagens podem ser projetadas não tiver uma 
      proporção de aspecto de 4:3, isso deveria funcionar.

    </para>

    <para>

      Para tentar isso, você pode reinicializar e editar a linha de 
      comando do grub para inserir um parâmetro 'video=' entre o 
      'root=/dev/sdXn' e 'ro'; por exemplo,
      <literal>root=/dev/sda2 video=1024x768 ro</literal>, baseado no
      exemplo da seção 10.4.4 do 
      LFS: <ulink url="&lfs-root;/chapter10/grub.html"/>.

    </para>

    <para>

      Se decidir que deseja fazer isso, você pode então (como o(a) 
      usuário(a) <systemitem class="username">root</systemitem>) editar 
      <filename>/boot/grub/grub.cfg</filename>.

    </para>

  </sect2>

  <sect2 id="psf-fonts">
    <title>Usando as fontes psf padrão</title>

    <indexterm zone="postlfs-console-fonts psf-fonts">
      <primary sortas="g-usr-share-consolefonts">/usr/share/consolefonts</primary>
    </indexterm>

    <para>

      No LFS o pacote <application>kbd</application> é usado.  As fontes 
      que ele fornece são as Fontes de Área de Exibição de PC, 
      geralmente chamadas de PSF, e elas foram instaladas no <filename 
      class="directory">/usr/share/consolefonts</filename>.  Onde essas 
      incluem uma tabela de mapeamento unicode, o sufixo do arquivo 
      frequentemente é mudado para <literal>.psfu</literal>, apesar de 
      pacotes tais como o <application>terminus-font</application> 
      (veja-se abaixo) não adicionam o 'u'.  Essas fontes geralmente são 
      comprimidas com o gzip para economizar espaço, porém isso não é 
      essencial.

    </para>

    <para>

      As áreas de exibição de texto iniciais do PC tinham oito (08) 
      cores; ou dezesseis (16) cores se as versões brilhantes das oito 
      (08) cores originais fossem usadas.  Uma fonte PSF pode incluir 
      até duzentos e cinquenta e seis (256) caracteres (tecnicamente, 
      glifos) enquanto permite dezesseis (16) cores; ou até quinhentos e 
      doze (512) caracteres (caso no qual, as cores brilhantes não 
      estarão disponíveis).  Claramente, essas fontes de console não 
      podem ser usadas para exibir texto CJK - isso precisaria de centenas 
      de glifos disponíveis.

    </para>

    <para>

      Algumas fontes no <application>kbd</application> podem cobrir mais 
      que quinhentos e doze (512) pontos de código ('caracteres'), com 
      graus variantes de fidelidade: unicode contém vários pontos de 
      código de espaço em branco os quais podem todos serem mapeados 
      para um espaço; variedades de traços podem ser mapeados para um 
      sinal de menos; aspas inteligentes podem ser mapeadas para as 
      aspas ASCII regulares em vez de para o que é usado para "ponto de 
      código não presente ou inválido"; e aquelas letras cirílicas ou 
      gregas que se parecem com letras latinas podem ser mapeadas nelas, 
      de forma que 'A' também pode cumprir o dever para o A cirílico e 
      grego Alfa; e 'P' também pode cumprir o dever para o cirílico ER e 
      grego RHO. Infelizmente, onde uma fonte tenha sido criada a partir 
      de um arquivo BDF (o método no terminus e no <ulink 
      url="https://packages.debian.org/jessie/utils/console-setup">console-setup</ulink> 
      do Debian) tal mapeamento dos pontos de código adicionais em um 
      glifo existente nem sempre é feito, apesar das fontes ter-vXXn do 
      terminus fazerem isso bem.

    </para>

    <para>

      Existem mais que cento e vinte (120) combinações de fonte e 
      tamanho no <application>kbd</application>: frequentemente uma 
      fonte é fornecida em vários tamanhos de caracteres; e, de vez em 
      quando, as variedades cobrem subconjuntos diferentes do unicode.  
      A maioria é da largura de oito (08) pixeis, em alturas de oito 
      (08) até dezesseis (16) pixeis; porém, existem umas poucas que são 
      da largura de nove (09) pixeis; algumas outras são 12x22; e mesmo 
      uma, (<filename>latarcyrheb-sun32.psfu</filename>), que foi 
      escalada até 16x32.  Usar uma fonte maior é outra maneira de 
      tornar o texto mais fácil de ler em uma superfície larga sobre a 
      qual imagens podem ser projetadas.

    </para>

  </sect2>

  <sect2 id="testing-fonts">
    <title>Testando fontes diferentes</title>

    <para>

      Você pode testar as fontes como um(a) usuário(a) normal.  Se tiver 
      uma fonte que não tenha sido instalada, [então] você pode 
      carregá-la com:

    </para>

<screen><userinput>setfont /caminho/para/suafonte.ext</userinput></screen>

    <para>

      Para as fontes já instaladas você precisa somente do nome; assim, 
      usando <filename>gr737a-9x16.psfu.gz</filename> como um exemplo:

    </para>

<screen><userinput>setfont gr737a-9x16</userinput></screen>

    <para>

      Para ver os glifos na fonte, use:

    </para>

<screen><userinput>showconsolefont</userinput></screen>

    <para>

      Se a fonte aparentar como se pudesse ser útil, você pode então ir 
      em frente para testá-la mais minuciosamente.

    </para>

    <para>

      Quando você encontrar uma fonte que desejar usar, como o(a) 
      usuário(a) <systemitem class="username">root</systemitem> edite o 
<phrase revision="sysv"><filename>/etc/sysconfig/console</filename> conforme descrito na seção 9.6.5 do LFS <ulink url="&lfs-root;/chapter09/usage.html"/>.</phrase>
<phrase revision="systemd"><filename>/etc/vconsole.conf</filename> conforme descrito na seção 9.6 do LFS <ulink url="&lfs-root;/chapter09/console.html"/>.</phrase>

    </para>

    <para>

      Para fontes não fornecidas com o pacote 
      <application>kbd</application>, você precisará opcionalmente 
      comprimi-la(s) com o <command>gzip</command> e então instalá-la(s) 
      como o(a) usuário(a)
      <systemitem class="username">root</systemitem>.

    </para>

  </sect2>

<!-- depois disso, psf-tools -->

  <sect2 id="psf-tools">
    <title>Editando fontes usando o psf-tools</title>

    <indexterm zone="postlfs-console-fonts psf-tools">
      <primary sortas="a-psftools">psftools</primary>
    </indexterm>

    <para>

      Apesar de algumas fontes de console serem criadas a partir de 
      arquivos BDF, que é um formato de texto com valores hexadecimais 
      para os pixeis em cada linha do caractere, existem ferramentas 
      mais modernas disponíveis para editar fontes psf.  O pacote
      <ulink url="http://www.seasip.info/Unix/PSF/">psftools</ulink> te permite 
      despejar uma fonte para uma representação de texto com um 
      travessão para um pixel que esteja desligado (preto); e uma 
      cerquilha para um pixel que esteja ligado (branco).  Você pode 
      então editar o arquivo de texto para adicionar mais caracteres; ou 
      remodelá-los; ou mapear pontos de código extras para eles; e, 
      então, criar uma fonte psf nova com as suas mudanças.

    </para>

  </sect2>

<!-- finalmente, vincular a terminus e vincular a ela a partir do acima -->
  <sect2 id="terminus-font">
    <title>Usando fontes a partir da fonte Terminus</title>

    <indexterm zone="postlfs-console-fonts terminus-font">
      <primary sortas="a-terminus-font">terminus-font</primary>
    </indexterm>

    <para>

      O pacote
      <ulink url="http://terminus-font.sourceforge.net/">Fonte Terminus</ulink>
      fornece fontes de mapa de bits de largura fixa 
      projetadas para trabalho longo (oito (08) horas e mais por dia) 
      com computadores.  Sob 'Character variants' naquela página está 
      uma lista de correções (no diretório
      <filename class="directory">alt/</filename>).  Se estiver usando um 
      navegador gráfico para olhar para aquela página, [então] você pode 
      ver o que as correções fazem; por exemplo, 'll2' torna o 'l' mais 
      visivelmente diferente de 'i' e '1'.

    </para>

    <para>

      Por padrão, <application>terminus-fonts</application> tentará 
      criar vários tipos de fontes e falhará se 
      <command>bdftopcf</command> oriundo do <xref linkend="xorg7-app"/> 
      não tiver sido instalado.  O script configure somente é realmente 
      útil se você for em frente para instalar 
      <emphasis>todas</emphasis> as fontes (console e mapa de bits do 
      X11) nos diretórios corretos, como em uma distribuição.  Para 
      construir somente as fontes PSF e as dependências delas, execute:

    </para>

<screen><userinput>make psf</userinput></screen>

    <para>

      Isso criará mais que duzentas e quarenta (240) fontes ter-*.psf.  
      O sufixo 'b' indica brilhante; 'n' indica normal.  Você pode então 
      testá-las para ver se alguma se adéqua às suas exigências.  A 
      menos que esteja criando uma distribuição, parece não fazer 
      sentido instalá-las todas.

    </para>

    <para>

      Como um exemplo, para instalar a última dessas fontes, você pode 
      descomprimi-la e, então, como o(a) usuário(a)
      <systemitem class="username">root</systemitem>:

    </para>

<screen><userinput>install -v -m644 ter-v32n.psf.gz /usr/share/consolefonts</userinput></screen>

  </sect2>

</sect1>
