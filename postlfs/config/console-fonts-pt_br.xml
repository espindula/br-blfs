<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<!--

Direitos autorais (Copyright) da versão modificada traduzida para a 
língua portuguesa escrita e falada no Brasil: (c) 2022, 2023 Jamenson 
Ferreira Espindula de Almeida Melo (<jafesp@gmail.com>).

  Este trabalho de tradução do livro "Beyond Linux From Scratch" é 
  classificado pela Free Software Foundation como sendo uma "versão 
  modificada" do mencionado livro.  Em assim sendo, na qualidade de 
  tradutor, produtor da "versão modificada" e titular dos direitos 
  autorais sobre a versão traduzida para a língua portuguesa do livro 
  "Beyond Linux From Scratch", concede-se a seguinte permissão:

  É concedida permissão para copiar, distribuir e (ou) modificar este 
  livro "Beyond Linux From Scratch", versão traduzida para a língua 
  portuguesa, sob os termos da Licença de Documentação Livre GNU, versão 
  1.3 ou qualquer versão posterior publicada pela Free Software 
  Foundation; sem Seções Invariantes, sem Textos de Capa Frontal e sem 
  Textos de Quarta Capa.  Uma cópia da licença está incluída na seção 
  intitulada "Licença de Documentação Livre GNU".
  
# Atenção: todos os documentos aqui publicados são distribuídos sem qualquer garantia, implícita e (ou) explícita.
  
  Permission is granted to copy, distribute and (or) modify this book 
  "Beyond Linux From Scratch", translated into Brazilian Portuguese, 
  under the terms of the GNU Free Documentation License, Version 1.3 or 
  any later version published by the Free Software Foundation; with no 
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A 
  copy of the license is included in the section entitled "GNU Free 
  Documentation License".

# Warning: all the files herein published are released with no warranty, implicit and (or) explicit.

-->

<sect1 id="postlfs-console-fonts" xreflabel="Acerca das Fontes do Console">
  <?dbhtml filename="console-fonts-pt_br.html"?>

  <sect1info>
    <date>$Date$</date>
  </sect1info>

  <title>Acerca das Fontes do Console</title>

  <indexterm zone="postlfs-console-fonts">
    <primary sortas="a-console-fonts">fontes-console</primary>
  </indexterm>

  <para>

    Um sistema LFS pode ser usado sem uma área de trabalho gráfica e, a 
    menos ou até que instale o <xref linkend="x-window-system"/>, você 
    terá que trabalhar no console.  A maioria, se não todos, dos PCs 
    inicializa com uma fonte 8x16 - qualquer que seja o tamanho atual da 
    superfície sobre a qual imagens podem ser projetadas.  Existem umas 
    poucas coisas que você pode fazer para alterar a exibição no 
    console.  A maioria delas envolve mudar a fonte, porém a primeira 
    altera a linha de comando usada pelo grub.

  </para>

  <para condition="html" role="usernotes">Observações de Usuário(a):
  <ulink url="&blfs-wiki;/aboutconsolefonts"/></para>

  <sect2 id="grub-video">

    <title>

      Configurando um tamanho menor de superfície de exibição no grub

    </title>

    <indexterm zone="postlfs-console-fonts grub-video">
      <primary sortas="e-boot-grub-grub-cfg">/boot/grub/grub.cfg</primary>
    </indexterm>

    <para>

      As modernas superfícies sobre as quais imagens podem ser 
      projetadas frequentemente tem muito mais pixels que as superfícies 
      sobre as quais imagens podem ser projetadas usadas no passado.  Se 
      a sua superfície sobre a qual imagens podem ser projetadas for 
      1.600 pixels de largura, [então] uma fonte 8x16 te dará 200 
      colunas de texto - a menos que o seu monitor seja enorme, o texto 
      será pequeno.  Uma das maneiras de se contornar isso é a de se 
      dizer ao grub para usar um tamanho menor, tal como 1.024x768; ou 
      800x600; ou mesmo 640x480.  Mesmo se a sua superfície sobre a qual 
      imagens podem ser projetadas não tiver uma proporção de aspecto de 
      4:3, isso deveria funcionar.

    </para>

    <para>

      Para tentar isso, você pode reinicializar e editar a linha de 
      comando do grub para inserir um parâmetro 'video=' entre o 
      'root=/dev/sdXn' e 'ro'; por exemplo,
      <literal>root=/dev/sda2 video=1024x768 ro</literal>, baseado no
      exemplo da seção 10.4.4 do 
      LFS: <ulink url="&lfs-root;/chapter10/grub.html"/>.

    </para>

    <para>

      Se decidir que deseja fazer isso, você pode então (como o(a) 
      usuário(a) <systemitem class="username">root</systemitem>) editar 
      <filename>/boot/grub/grub.cfg</filename>.

    </para>

  </sect2>

  <sect2 id="psf-fonts">
    <title>Using the standard psf fonts</title>

    <indexterm zone="postlfs-console-fonts psf-fonts">
      <primary sortas="g-usr-share-consolefonts">/usr/share/consolefonts</primary>
    </indexterm>

    <para>
      In LFS the <application>kbd</application> package is used. The fonts it
      provides are PC Screen Fonts, usually called PSF, and they were installed
      into <filename class="directory">/usr/share/consolefonts</filename>. Where
      these include a unicode mapping table, the file suffix is often changed to
       <literal>.psfu</literal> although packages such as
      <application>terminus-font</application> (see below) do not add the 'u'.
      These fonts are usually compressed with gzip to save space, but that is
      not essential.
    </para>

    <para>
      The initial PC text screens had 8 colours, or 16 colours if the bright
      versions of the original 8 colours were used. A PSF font can include up
      to 256 characters (technically, glyphs) while allowing 16 colours, or up
      to 512 characters (in which  case, the bright colours will not be
      available). Clearly, these console fonts cannot be used to display CJK
      text - that would need thousands of available glyphs.
    </para>

    <para>
      Some fonts in <application>kbd</application> can cover more than 512
      codepoints ('characters'), with varying degrees of fidelity: unicode
      contains several whitespace codepoints which can all be mapped to a space,
      varieties of dashes can be mapped to a minus sign, smart quotes can map to
      the regular ASCII quotes rather than to whatever is used for "codepoint
      not present or invalid", and those cyrillic or greek letters which look
      like latin letters can be mapped onto them, so 'A' can also do duty for
      cyrillic A and greek Alpha, and 'P' can also do duty for cyrillic ER and
      greek RHO. Unfortunately, where a font has been created from a BDF file
      (the method in terminus and debian's <ulink
      url="https://packages.debian.org/jessie/utils/console-setup">console-setup
      </ulink>) such mapping of additional codepoints onto an existing glyph is
      not always done, although the terminus ter-vXXn fonts do this well.
    </para>

    <para>
      There are over 120 combinations of font and size in
      <application>kbd</application>: often a font is provided at several
      character sizes, and sometimes varieties cover different subsets of
      unicode. Most are 8 pixels wide, in heights from 8 to 16 pixels, but there
      are a few which are 9 pixels wide, some others which are 12x22, and even
      one (<filename>latarcyrheb-sun32.psfu</filename>) which has been scaled up
      to 16x32. Using a bigger font is another way of making text on a large
      screen easier to read.
    </para>

  </sect2>

  <sect2 id="testing-fonts">
    <title>Testing different fonts</title>

    <para>
      You can test fonts as a normal user. If you have a font which has not been
      installed, you can load it with :
    </para>

<screen><userinput>setfont /path/to/yourfont.ext</userinput></screen>

    <para>
      For the fonts already installed you only need the name, so using
      <filename>gr737a-9x16.psfu.gz</filename> as an example:
    </para>

<screen><userinput>setfont gr737a-9x16</userinput></screen>

    <para>
      To see the glyphs in the font, use:
    </para>

<screen><userinput>showconsolefont</userinput></screen>

    <para>
      If the font looks as if it might be useful, you can then go on to test it
      more thoroughly.
    </para>

    <para>
      When you find a font which you wish to use, as the
      <systemitem class="username">root</systemitem> user) edit
      <phrase revision="sysv">
      <filename>/etc/sysconfig/console</filename> as described in
      LFS section 9.6.5
      <ulink url="&lfs-root;/chapter09/usage.html"/>.</phrase>
      <phrase revision="systemd">
      <filename>/etc/vconsole.conf</filename> as described in
      LFS section 9.6
      <ulink url="&lfs-root;/chapter09/console.html"/>.</phrase>.
    </para>

    <para>
      For fonts not supplied with the <application>kbd</application> package
      you will need to optionally compress it / them with
      <command>gzip</command> and then install it / them as the
     <systemitem class="username">root</systemitem> user.
    </para>

  </sect2>

<!-- after that, psf-tools -->

  <sect2 id="psf-tools">
    <title>Editing fonts using psf-tools</title>

    <indexterm zone="postlfs-console-fonts psf-tools">
      <primary sortas="a-psftools">psftools</primary>
    </indexterm>

    <para>
      Although some console fonts are created from BDF files, which is a text
      format with hex values for the pixels in each row of the character, there
      are more-modern tools available for editing psf fonts. The
      <ulink url="http://www.seasip.info/Unix/PSF/">psftools</ulink> package
      allows you to dump a font to a text representation with a dash for a
      pixel which is off (black) and a hash for a pixel which is on (white).
      You can then edit the text file to add more characters, or reshape them,
      or map extra codepoints onto them, and then create a new psf font with
      your changes.
    </para>

  </sect2>

<!-- finally, link to terminus and link to it from above -->
  <sect2 id="terminus-font">
    <title>Using fonts from Terminus-font</title>

    <indexterm zone="postlfs-console-fonts terminus-font">
      <primary sortas="a-terminus-font">terminus-font</primary>
    </indexterm>

    <para>
      The <ulink
      url="http://terminus-font.sourceforge.net/">Terminus Font</ulink> package
      provides fixed-width bitmap fonts designed for long (8 hours and more per
      day) work with computers. Under 'Character variants' on that page is a
      list of patches (in the <filename class="directory">alt/</filename>
      directory). If you are using a graphical browser to look at that page, you
      can see what the patches do, e.g. 'll2' makes 'l' more visibly different
      from 'i' and '1'.
    </para>

    <para>
      By default <application>terminus-fonts</application> will try to create
      several types of font, and it will fail if <command>bdftopcf</command>
      from <xref linkend="xorg7-app"/> has not been installed. The configure
      script is only really useful if you go on to install
      <emphasis>all</emphasis> the fonts (console and X11 bitmap) to the
      correct directories, as in a distro. To build only the PSF fonts and
      their dependencies, run:
    </para>

<screen><userinput>make psf</userinput></screen>

    <para>
      This will create more than 240 ter-*.psf fonts.  The 'b' suffix indicates
      bright, 'n' indicates normal. You can then test them to see if any fit
      your requirements. Unless you are creating a distro, there seems little
      point in installing them all.
    </para>

    <para>
      As an example, to install the last of these fonts, you can gzip it and
      then as the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen><userinput>install -v -m644 ter-v32n.psf.gz /usr/share/consolefonts</userinput></screen>

  </sect2>


<!-- then svn up, add changelog, do the propsets, create wiki page -->
</sect1>
