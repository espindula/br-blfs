<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<!--

Direitos autorais (Copyright) da versão modificada traduzida para a 
língua portuguesa escrita e falada no Brasil: (c) 2022, 2023 Jamenson 
Ferreira Espindula de Almeida Melo (<jafesp@gmail.com>).

  Este trabalho de tradução do livro "Beyond Linux From Scratch" é 
  classificado pela Free Software Foundation como sendo uma "versão 
  modificada" do mencionado livro.  Em assim sendo, na qualidade de 
  tradutor, produtor da "versão modificada" e titular dos direitos 
  autorais sobre a versão traduzida para a língua portuguesa do livro 
  "Beyond Linux From Scratch", concede-se a seguinte permissão:

  É concedida permissão para copiar, distribuir e (ou) modificar este 
  livro "Beyond Linux From Scratch", versão traduzida para a língua 
  portuguesa, sob os termos da Licença de Documentação Livre GNU, versão 
  1.3 ou qualquer versão posterior publicada pela Free Software 
  Foundation; sem Seções Invariantes, sem Textos de Capa Frontal e sem 
  Textos de Quarta Capa.  Uma cópia da licença está incluída na seção 
  intitulada "Licença de Documentação Livre GNU".
  
# Atenção: todos os documentos aqui publicados são distribuídos sem qualquer garantia, implícita e (ou) explícita.
  
  Permission is granted to copy, distribute and (or) modify this book 
  "Beyond Linux From Scratch", translated into Brazilian Portuguese, 
  under the terms of the GNU Free Documentation License, Version 1.3 or 
  any later version published by the Free Software Foundation; with no 
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A 
  copy of the license is included in the section entitled "GNU Free 
  Documentation License".

# Warning: all the files herein published are released with no warranty, implicit and (or) explicit.

-->

<sect1 id="fw-firewall" xreflabel="Teorias de Firewall">
  <?dbhtml filename="firewall-pt_br.html"?>

  <sect1info>
    <date>$Date$</date>
  </sect1info>

  <title>Configurando um Firewall de Rede de Comunicação</title>

  <sect2 id="fw-intro" xreflabel="Introdução às Teorias de Firewall">
    <title>Introdução à Criação de Firewall</title>

    <para>

      O propósito de um firewall é o de proteger um computador ou uma 
      rede de comunicação contra acesso malicioso.  Em um mundo 
      perfeito, cada daemon ou serviço, em cada máquina, está 
      perfeitamente configurado e imune a falhas de segurança e 
      todos(as) os(as) usuários(as) são implicitamente confiáveis para 
      usar o equipamento conforme pretendido.  Entretanto, isso é 
      raramente, se é que existe, o caso.  Daemons possivelmente estejam 
      mal configurados ou atualizações possivelmente não tenham sido 
      aplicadas para maus usos em benefício próprio conhecidos contra 
      serviços essenciais.  Adicionalmente, você possivelmente deseje 
      escolher quais serviços são acessíveis por certas máquinas ou por 
      usuários(as); ou você possivelmente deseje limitar para quais 
      máquinas ou aplicações são permitidas o acesso externo.  
      Alternativamente, você possivelmente simplesmente não confie em 
      alguns dos seus aplicativos ou usuários(as).  Por essas razões, um 
      firewall cuidadosamente projetado deveria ser uma parte essencial 
      da segurança do sistema.

    </para>

    <para>

      Embora um firewall consiga limitar bastante o escopo dos problemas 
      acima, não assuma que ter-se um firewall torna redundante a 
      configuração cuidadosa ou que qualquer má configuração negligente 
      seja inofensiva.  Um firewall não evita o mau uso em benefício 
      próprio de qualquer serviço que você ofereça do lado de fora dele.  
      A despeito de ter um firewall, você precisa manter aplicativos e 
      daemons devidamente configurados e atualizados.

    </para>

  </sect2>

  <sect2>
    <title>Significado da Palavra "Firewall"</title>

    <para>

      A palavra firewall pode ter diferentes significados.

    </para>

    <sect3>
      <title>Firewall Pessoal</title>

      <para>

        Esse é um dispositivo de hardware ou aplicativo de software 
        destinado a proteger computador doméstico ou de área de trabalho 
        conectado com a Internet.  Esse tipo de firewall é altamente 
        relevante para usuários(as) que não sabem como o computador 
        deles(as) poderia ser acessado via Internet ou como desabilitar 
        tal acesso, especialmente se eles(as) sempre estiverem online e 
        conectados(as) via links de banda larga.

      </para>

      <para>

        Uma configuração de exemplo para um firewall pessoal é fornecida 
        em <xref linkend="fw-persFw-ipt"/>.

      </para>

    </sect3>

    <sect3>
      <title>Roteador de Mascaramento</title>

      <para>

        Isso é um sistema colocado entre a Internet e uma intranet.  
        Para minimizar o risco de comprometimento do próprio firewall, 
        geralmente deveria ter somente uma função&mdash;aquela de 
        proteger a intranet.  Embora não completamente livre de risco, 
        as tarefas de fazer o roteamento e de mascaramento de IP 
        (reescrever cabeçalhos de IP dos pacotes que ele roteia de 
        clientes com endereços IP privados para a Internet, de forma que 
        eles pareçam vir a partir do próprio firewall) comumente são 
        consideradas relativamente seguras.

      </para>

      <para>

        Uma configuração de exemplo para um firewall de mascaramento é 
        fornecida em <xref linkend="fw-masqRouter-ipt"/>.

      </para>

    </sect3>

    <sect3>
      <title>BusyBox</title>

      <para>

        Isso frequentemente é um computador antigo que você 
        possivelmente tenha aposentado e quase esquecido, realizando 
        funções de mascaramento ou de roteamento, porém oferecendo 
        serviços que não são de firewall, tais como um cache de web ou 
        correio.  Isso possivelmente seja usado para redes de 
        comunicação domésticas, porém não é para ser considerado tão 
        seguro quanto uma máquina somente de firewall, pois a combinação 
        de servidor e roteador/firewall em uma máquina eleva a 
        complexidade da configuração.

      </para>

      <para>

        Uma configuração de exemplo para uma BusyBox é fornecida em 
        <xref linkend="fw-busybox-ipt"/>.

      </para>

    </sect3>

    <sect3>
      <title>Firewall with a Demilitarized Zone</title>

      <para>
        This type of firewall performs masquerading or routing, but grants
        public access to some branch of your network that is physically
        separated from your regular intranet and is essentially a separate
        network with direct Internet access. The servers on this network are
        those which must be easily accessible from both the Internet and
        intranet. The firewall protects both networks. This type of firewall
        has a minimum of three network interfaces.
      </para>

    </sect3>

    <sect3>
      <title>Packetfilter</title>

      <para>
        This type of firewall does routing or masquerading but does
        not maintain a state table of ongoing communication streams. It is
        fast but quite limited in its ability to block undesired packets
        without blocking desired packets.
      </para>

    </sect3>

  </sect2>

  <sect2>
    <title>Conclusion</title>

    <caution>
      <para>
        The example configurations provided for <xref linkend="iptables"/>
<!-- and <xref linkend="nftables"/> -->
        are not intended to be a complete guide to
        securing systems. Firewalling is a complex issue that requires careful
        configuration. The configurations provided by BLFS are intended only to
        give examples of how a firewall works. They are not intended to fit any
        particular configuration and may not provide complete protection from
        an attack.
      </para>
    </caution>
<!--
    <para>
      BLFS provides two utilities to manage the kernel Netfilter interface,
      <xref linkend="iptables"/> and <xref linkend="nftables"/>.
    </para>
-->
    <para>
      BLFS provides an utility to manage the kernel Netfilter interface,
      <xref linkend="iptables"/>. It has been around since early 2.4 kernels,
      and has been the standard since. This is likely the set of tools that
      will be most familiar to existing admins. Other tools have been
      developed more recently, see the list of further readings below
      for more details. Here you will find a
      list of URLs that contain comprehensive information about building
      firewalls and further securing your system.
    </para>
<!--
    <para>
      <xref linkend="nftables"/> is the successor to <xref linkend="iptables"/>
      and provies all of the same functionality with a single userspace tool,
      <command>nft</command>, that uses similar syntax to BSD's
      <application>pf</application> utility, and may be easier for new users or
      admins already familiar with that platform.
    </para>

    <para>
      While both can be used in tandem, that is an advanced configuration and
      you should decide on one or the other. Both pages include very simple
      example configurations, and customization of the provided configurations
      for your specific environment will be necessary if you elect to use
      either without a configuration tool.
    </para>

    <para>
      Additionally, a firewall management tool, <xref linkend="firewalld"/>, is
      provided to greatly ease firewall configuration for both simple and
      complex environments, and can be used with either tool. You should not
      use the example configurations if you intend to use
      <application>firewalld</application> to manage your firewall rules.
    </para>

    <para>
      If you elect to configure manually, have a look at the
      list of further reading below for more details. Here you will find a
      list of URLs that contain comprehensive information about building
      firewalls and further securing your system.
    </para>
-->
  </sect2>

  <sect2 id="fw-extra-info">
    <title>Extra Information</title>

    <sect3>
      <title>Further Reading on Firewalls</title>

      <blockquote>
        <literallayout>
<ulink url="http://www.netfilter.org/">www.netfilter.org - Homepage of the netfilter/iptables/nftables projects</ulink>
<ulink url="http://www.netfilter.org/documentation/FAQ/netfilter-faq.html">Netfilter related FAQ</ulink>
<ulink url="http://www.netfilter.org/documentation/index.html#HOWTO">Netfilter related HOWTO's</ulink>
<ulink url="https://wiki.nftables.org/wiki-nftables/index.php/Main_Page">nftables HOWTO</ulink>
<ulink url="http://en.tldp.org/LDP/nag2/x-087-2-firewall.html">en.tldp.org/LDP/nag2/x-087-2-firewall.html</ulink>
<ulink url="http://en.tldp.org/HOWTO/Security-HOWTO.html">en.tldp.org/HOWTO/Security-HOWTO.html</ulink>
<ulink url="http://en.tldp.org/HOWTO/Firewall-HOWTO.html">en.tldp.org/HOWTO/Firewall-HOWTO.html</ulink>
<ulink url="http://www.linuxsecurity.com/docs/">www.linuxsecurity.com/docs/</ulink>
<ulink url="http://www.little-idiot.de/firewall">www.little-idiot.de/firewall (German &amp; outdated, but very comprehensive)</ulink>
<ulink url="http://linux.oreillynet.com/pub/a/linux/2000/03/10/netadmin/ddos.html">linux.oreillynet.com/pub/a/linux/2000/03/10/netadmin/ddos.html</ulink>
<ulink url="http://staff.washington.edu/dittrich/misc/ddos">staff.washington.edu/dittrich/misc/ddos</ulink>
<ulink url="http://www.e-infomax.com/ipmasq">www.e-infomax.com/ipmasq</ulink>
<ulink url="http://www.circlemud.org/~jelson/writings/security/index.htm">www.circlemud.org/~jelson/writings/security/index.htm</ulink>
<ulink url="http://www.securityfocus.com">www.securityfocus.com</ulink>
<ulink url="http://www.cert.org/tech_tips/">www.cert.org - tech_tips</ulink>
<ulink url="http://security.ittoolbox.com/">security.ittoolbox.com</ulink>
<ulink url="http://www.insecure.org/reading.html">www.insecure.org/reading.html</ulink>
        </literallayout>
      </blockquote>

    </sect3>

  </sect2>

</sect1>
