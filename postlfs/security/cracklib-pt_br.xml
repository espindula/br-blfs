<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!--

Direitos autorais (Copyright) da versão modificada traduzida para a 
língua portuguesa escrita e falada no Brasil: (c) 2022, 2023 Jamenson 
Ferreira Espindula de Almeida Melo (<jafesp@gmail.com>).

  Este trabalho de tradução do livro "Beyond Linux From Scratch" é 
  classificado pela Free Software Foundation como sendo uma "versão 
  modificada" do mencionado livro.  Em assim sendo, na qualidade de 
  tradutor, produtor da "versão modificada" e titular dos direitos 
  autorais sobre a versão traduzida para a língua portuguesa do livro 
  "Beyond Linux From Scratch", concede-se a seguinte permissão:

  É concedida permissão para copiar, distribuir e (ou) modificar este 
  livro "Beyond Linux From Scratch", versão traduzida para a língua 
  portuguesa, sob os termos da Licença de Documentação Livre GNU, versão 
  1.3 ou qualquer versão posterior publicada pela Free Software 
  Foundation; sem Seções Invariantes, sem Textos de Capa Frontal e sem 
  Textos de Quarta Capa.  Uma cópia da licença está incluída na seção 
  intitulada "Licença de Documentação Livre GNU".
  
# Atenção: todos os documentos aqui publicados são distribuídos sem qualquer garantia, implícita e (ou) explícita.
  
  Permission is granted to copy, distribute and (or) modify this book 
  "Beyond Linux From Scratch", translated into Brazilian Portuguese, 
  under the terms of the GNU Free Documentation License, Version 1.3 or 
  any later version published by the Free Software Foundation; with no 
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A 
  copy of the license is included in the section entitled "GNU Free 
  Documentation License".

# Warning: all the files herein published are released with no warranty, implicit and (or) explicit.

-->

  <!ENTITY cracklib-url "https://github.com/cracklib/cracklib/releases/download">

  <!ENTITY cracklib-download-http "&cracklib-url;/v&cracklib-version;/cracklib-&cracklib-version;.tar.bz2">
  <!ENTITY cracklib-download-ftp  " ">
  <!ENTITY cracklib-md5sum        "0d68de25332cee5660850528a385427f">
  <!ENTITY cracklib-size          "592 KB">
  <!ENTITY cracklib-buildsize     "4,2 MB">
  <!ENTITY cracklib-time          "menos que 0,1 UPC">

  <!ENTITY crackdict-download     "&cracklib-url;/v&cracklib-version;/cracklib-words-&cracklib-version;.bz2">
  <!ENTITY crackdict-size         "6,7 MB">
  <!ENTITY crackdict-md5sum       "94e9963e4786294f7fb0f2efd7618551">
]>

<sect1 id="cracklib" xreflabel="CrackLib-&cracklib-version;">
  <?dbhtml filename="cracklib-pt_br.html"?>

  <sect1info>
    <date>$Date$</date>
  </sect1info>

  <title>CrackLib-&cracklib-version;</title>

  <indexterm zone="cracklib">
    <primary sortas="a-CrackLib">CrackLib</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introdução ao CrackLib</title>

    <para>

      O pacote <application>CrackLib</application> contém uma biblioteca 
      usada para impor senhas fortes comparando-se senhas selecionadas 
      pelo(a) usuário(a) a palavras em listas de palavras escolhidas.

    </para>

    &lfs111_checked;

    <bridgehead renderas="sect3">Informação do Pacote</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Transferência (HTTP): <ulink url="&cracklib-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Transferência (FTP): <ulink url="&cracklib-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Soma de verificação MD5 da transferência: &cracklib-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Tamanho da transferência: &cracklib-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Espaço em disco estimado exigido: &cracklib-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Tempo de construção estimado: &cracklib-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Transferências Adicionais</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>

        <para>

          Lista recomendada de palavras para países falantes do idioma 
          inglês (tamanho: &crackdict-size;; md5sum: 
          &crackdict-md5sum;): <ulink url="&crackdict-download;"/>

        </para>

      </listitem>
    </itemizedlist>

    <para>

      Existem listas adicionais de palavras disponíveis para 
      transferência, por exemplo, a partir de <ulink 
      url="http://www.cotse.com/tools/wordlists.htm"/>.  O 
      <application>CrackLib</application> pode utilizar tantas quantas, 
      ou tão poucas quantas, listas de palavras você escolher instalar.

    </para>

    <important>

      <para>

        Os(As) usuários(as) tendem a basear as senhas deles(as) em 
        palavras comuns do idioma falado e os(as) crackers sabem disso.  
        O <application>CrackLib</application> é concebido para filtrar 
        tais senhas ruins na fonte usando um dicionário criado a partir 
        de listas de palavras.  Para realizar isso, a(s) lista(s) de 
        palavras para usar-se com o <application>CrackLib</application> 
        precisa(m) ser uma lista exaustiva de palavras e de combinações 
        de pressionamentos de teclas baseadas em palavras suscetíveis de 
        serem escolhidas pelos(as) usuários(as) do sistema como senhas 
        (adivinháveis).

      </para>

      <para>

        A lista padrão de palavras recomendada acima para transferência 
        na maioria das vezes satisfaz essa função em países falantes do 
        idioma inglês.  Em outras situações, possivelmente seja 
        necessário transferir (ou mesmo criar) listas adicionais de 
        palavras.

      </para>

      <para>

        Observe que listas de palavras adequadas para verificação 
        ortográfica não são utilizáveis como listas de palavras do 
        <application>CrackLib</application> em países com alfabetos não 
        baseados no idioma latino, por causa das
<quote>combinações de pressionamentos de teclas baseadas em palavras</quote> que 
        tornam as senhas ruins.

      </para>

    </important>

    <para condition="html" role="usernotes">Observações de Usuário(a):
      <ulink url="&blfs-wiki;/cracklib"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Instalação do CrackLib</title>

    <para>

      Instale o <application>CrackLib</application> executando os 
      seguintes comandos:

    </para>

<screen><userinput>sed -i '/skipping/d' util/packer.c &amp;&amp;

sed -i '15209 s/.*/am_cv_python_version=&python3-majorver;/' configure &amp;&amp;

PYTHON=python3 CPPFLAGS=-I/usr/include/python&python3-majorver; \
./configure --prefix=/usr    \
            --disable-static \
            --with-default-dict=/usr/lib/cracklib/pw_dict &amp;&amp;
make</userinput></screen>

    <para>

      Agora, como o(a) usuário(a)
<systemitem class="username">root</systemitem>:

    </para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>

      Emita os seguintes comandos como o(a) usuário(a)
<systemitem class="username">root</systemitem> para instalar a lista 
      recomendada de palavras e para criar o dicionário do 
      <application>CrackLib</application>.  Outras listas de palavras 
      (baseadas em texto, uma palavra por linha) também podem ser usadas 
      simplesmente instalando-as no
<filename class="directory">/usr/share/dict</filename> e adicionando-as ao 
      comando <command>create-cracklib-dict</command>.

    </para>

<screen role="root"><userinput>install -v -m644 -D    ../cracklib-words-&cracklib-version;.bz2 \
                         /usr/share/dict/cracklib-words.bz2    &amp;&amp;

bunzip2 -v               /usr/share/dict/cracklib-words.bz2    &amp;&amp;
ln -v -sf cracklib-words /usr/share/dict/words                 &amp;&amp;
echo $(hostname) >>      /usr/share/dict/cracklib-extra-words  &amp;&amp;
install -v -m755 -d      /usr/lib/cracklib                     &amp;&amp;

create-cracklib-dict     /usr/share/dict/cracklib-words \
                         /usr/share/dict/cracklib-extra-words</userinput></screen>

    <para>

      Se desejado, [então] verifique a operação adequada da biblioteca 
      como um(a) usuário(a) desprivilegiado(a) emitindo o seguinte 
      comando:

    </para>

<screen remap="test"><userinput>make test</userinput></screen>

    <important>

      <para>

        Se estiver instalando o <application>CrackLib</application> 
        depois que o seu sistema LFS tiver sido completado e tiver o 
        pacote <application>Shadow</application> instalado, [então] você 
        precisa reinstalar o <xref linkend="shadow"/> se desejar 
        fornecer suporte a senha forte em seu sistema.  Se agora for 
        instalar o pacote <xref linkend="linux-pam"/>, [então] 
        possivelmente você possa desconsiderar essa observação, dado que 
        o <application>Shadow</application> será reinstalado depois da 
        instalação do <application>Linux-PAM</application>.

      </para>

    </important>

  </sect2>

  <sect2 role="commands">
    <title>Explicações do Comando</title>

    <para>

      <command>sed -i '/skipping/d' util/packer.c</command>: Remove um 
      aviso insignificante.

    </para>

    <para>

      <envar>PYTHON=python3</envar>: Isso força a instalação dos 
      vínculos do python para o Python 3, mesmo se o Python 2 estiver 
      instalado.

    </para>

    <para>

      <envar>CPPFLAGS=-I/usr/include/python&python3-majorver;</envar>: 
      Isso contorna um problema causado pelo uso incorreto dos 
      cabeçalhos do Python 3.

    </para>

    <para>

      <parameter>--with-default-dict=/lib/cracklib/pw_dict</parameter>: 
      Esse parâmetro força a instalação do dicionário do 
      <application>CrackLib</application> para a hierarquia
<filename class="directory">/lib</filename>.

    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries-pt_br.xml"/>

    <!-- CONSERTE-ME: não mais necessário com configuração mesclada do /usr

    <para>

      <command>mv -v /usr/lib/libcrack.so.2* /lib</command> e 
      <command>ln -v -sf ../../lib/libcrack.so.2.9.0 ...</command>: 
      Esses dois comandos movem a biblioteca <filename 
      class="libraryfile">libcrack.so.2.9.0</filename> e os vínculos 
      simbólicos associados do <filename 
      class="directory">/usr/lib</filename> para o <filename 
      class="directory">/lib</filename>; então recria o vínculo 
      simbólico <filename 
      class="symlink">/usr/lib/libcrack.so</filename> apontando para o 
      arquivo relocalizado.

    </para>

    -->

    <para>

      <command>install -v -m644 -D ...</command>: Esse comando cria o 
      diretório <filename class="directory">/usr/share/dict</filename> 
      (se já não existir) e instala a lista de palavras comprimida lá.

    </para>

    <para>

      <command>ln -v -s cracklib-words /usr/share/dict/words</command>: 
      A lista de palavras é vinculada a 
      <filename>/usr/share/dict/words</filename>, como historicamente; 
      <filename>words</filename> é a lista primária de palavras no 
      diretório <filename class="directory">/usr/share/dict</filename>.  
      Omita esse comando se você já tiver um arquivo 
      <filename>/usr/share/dict/words</filename> instalado no seu 
      sistema.

    </para>

    <para>

      <command>echo $(hostname) >>...</command>: O valor de 
      <command>hostname</command> é ecoado para um arquivo chamado 
      <filename>cracklib-extra-words</filename>.  Esse arquivo extra é 
      destinado a ser uma lista específica do sítio a qual inclui senhas 
      fáceis de adivinhar, tais como nomes de companhia ou de 
      departamento; nomes de usuário(a); nomes de produto; nomes de 
      computador; nomes de domínio; etc.

    </para>

    <para>

      <command>create-cracklib-dict ...</command>: Esse comando cria o 
      dicionário do <application>CrackLib</application> a partir das 
      listas de palavras.  Modifique o comando para acrescentar 
      quaisquer listas adicionais de palavras que você tiver instalado.

    </para>

  </sect2>

  <sect2 role="content">
    <title>Conteúdo</title>

    <segmentedlist>
      <segtitle>Aplicativos Instalados</segtitle>
      <segtitle>Bibliotecas Instaladas</segtitle>
      <segtitle>Diretórios Instalados</segtitle>

      <seglistitem>

        <seg>cracklib-check, cracklib-format, cracklib-packer, 
        cracklib-unpacker e create-cracklib-dict</seg>

        <seg>libcrack.so e a _cracklib.so (módulo do 
        <application>Python</application>)</seg>

        <seg>/lib/cracklib, /usr/share/dict e /usr/share/cracklib</seg>

      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descrições Curtas</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="cracklib-check">
        <term><command>cracklib-check</command></term>
        <listitem>

          <para>

            é usado para determinar se uma senha é forte

          </para>

          <indexterm zone="cracklib cracklib-check">
            <primary sortas="b-cracklib-check">cracklib-check</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cracklib-format">
        <term><command>cracklib-format</command></term>
        <listitem>

          <para>

            é usado para formatar arquivos de texto (converte todas as 
            palavras para minúsculas, remove caracteres de controle e 
            ordena as listas)

          </para>

          <indexterm zone="cracklib cracklib-format">
            <primary sortas="b-cracklib-format">cracklib-format</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="cracklib-packer">
        <term><command>cracklib-packer</command></term>
        <listitem>

          <para>

            cria uma base de dados com palavras lidas a partir da 
            entrada padrão gerada

          </para>

          <indexterm zone="cracklib cracklib-packer">
            <primary sortas="b-cracklib-packer">cracklib-packer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="cracklib-unpacker">
        <term><command>cracklib-unpacker</command></term>
        <listitem>

          <para>

            exibe na saída padrão gerada a base de dados especificada

          </para>

          <indexterm zone="cracklib cracklib-packer">
            <primary sortas="b-cracklib-packer">cracklib-packer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="create-cracklib-dict">
        <term><command>create-cracklib-dict</command></term>
        <listitem>

          <para>

            é usado para criar o dicionário do 
            <application>CrackLib</application> a partir da(s) dada(s) 
            lista(s) de palavras

          </para>

          <indexterm zone="cracklib create-cracklib-dict">
            <primary sortas="b-create-cracklib-dict">create-cracklib-dict</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcrack">
        <term><filename class="libraryfile">libcrack.so</filename></term>
        <listitem>

          <para>

            fornece um método rápido de procura de dicionário para 
            imposição de senha forte

          </para>

          <indexterm zone="cracklib libcrack">
            <primary sortas="c-libcrack">libcrack.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
