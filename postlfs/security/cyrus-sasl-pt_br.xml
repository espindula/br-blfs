<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!--

Direitos autorais (Copyright) da versão modificada traduzida para a 
língua portuguesa escrita e falada no Brasil: (c) 2022, 2023 Jamenson 
Ferreira Espindula de Almeida Melo (<jafesp@gmail.com>).

  Este trabalho de tradução do livro "Beyond Linux From Scratch" é 
  classificado pela Free Software Foundation como sendo uma "versão 
  modificada" do mencionado livro.  Em assim sendo, na qualidade de 
  tradutor, produtor da "versão modificada" e titular dos direitos 
  autorais sobre a versão traduzida para a língua portuguesa do livro 
  "Beyond Linux From Scratch", concede-se a seguinte permissão:

  É concedida permissão para copiar, distribuir e (ou) modificar este 
  livro "Beyond Linux From Scratch", versão traduzida para a língua 
  portuguesa, sob os termos da Licença de Documentação Livre GNU, versão 
  1.3 ou qualquer versão posterior publicada pela Free Software 
  Foundation; sem Seções Invariantes, sem Textos de Capa Frontal e sem 
  Textos de Quarta Capa.  Uma cópia da licença está incluída na seção 
  intitulada "Licença de Documentação Livre GNU".
  
# Atenção: todos os documentos aqui publicados são distribuídos sem qualquer garantia, implícita e (ou) explícita.
  
  Permission is granted to copy, distribute and (or) modify this book 
  "Beyond Linux From Scratch", translated into Brazilian Portuguese, 
  under the terms of the GNU Free Documentation License, Version 1.3 or 
  any later version published by the Free Software Foundation; with no 
  Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A 
  copy of the license is included in the section entitled "GNU Free 
  Documentation License".

# Warning: all the files herein published are released with no warranty, implicit and (or) explicit.

-->

  <!ENTITY cyrus-sasl-download-http "https://github.com/cyrusimap/cyrus-sasl/releases/download/cyrus-sasl-&cyrus-sasl-version;/cyrus-sasl-&cyrus-sasl-version;.tar.gz">
  <!ENTITY cyrus-sasl-download-ftp  " ">
  <!ENTITY cyrus-sasl-md5sum        "a33820c66e0622222c5aefafa1581083">
  <!ENTITY cyrus-sasl-size          "3,9 MB">
  <!ENTITY cyrus-sasl-buildsize     "26 MB">
  <!ENTITY cyrus-sasl-time          "0,1 UPC">
]>

<sect1 id="cyrus-sasl" xreflabel="Cyrus SASL-&cyrus-sasl-version;">
  <?dbhtml filename="cyrus-sasl-pt_br.html"?>

  <sect1info>
    <date>$Date$</date>
  </sect1info>

  <title>Cyrus SASL-&cyrus-sasl-version;</title>

  <indexterm zone="cyrus-sasl">
    <primary sortas="a-Cyrus-SASL">Cyrus SASL</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introdução ao Cyrus SASL</title>

    <para>

      O pacote <application>Cyrus SASL</application> contém uma 
      implementação de Camada Simples de Autenticação e Segurança, um 
      método para acrescentar-se suporte a autenticação para protocolos 
      baseados em conexão.  Para usar o SASL, um protocolo inclui um 
      comando para identificar e autenticar um(a) usuário(a) para um 
      servidor e para opcionalmente negociar proteção de subsequentes 
      interações de protocolo.  Se o uso for negociado, [então] uma 
      camada de segurança é inserida entre o protocolo e a conexão.

    </para>

    &lfs111_checked;

    <!-- Para testar esse pacote no congelamento, execute o seguinte 
    comando:
         testsaslauthd -u <current user> -p <password>
    depois que o saslauthd for iniciado. -->

    <bridgehead renderas="sect3">Informação do Pacote</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Transferência (HTTP): <ulink url="&cyrus-sasl-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Transferência (FTP): <ulink url="&cyrus-sasl-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Soma de verificação MD5 da transferência: &cyrus-sasl-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Tamanho da transferência: &cyrus-sasl-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Espaço em disco estimado exigido: &cyrus-sasl-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Tempo de construção estimado: &cyrus-sasl-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Transferências Adicionais</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Remendo exigido:
          <ulink url="&patch-root;/cyrus-sasl-&cyrus-sasl-version;-doc_fixes-1.patch"/>
        </para>
      </listitem>
      <!--<listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/cyrus-sasl-&cyrus-sasl-version;-openssl-1.1.0-1.patch"/>
       </para>
    </listitem>-->
    </itemizedlist>

    <bridgehead renderas="sect3">Dependências do Cyrus SASL</bridgehead>

    <bridgehead renderas="sect4">Recomendadas</bridgehead>
    <para role="recommended">
      <xref linkend="db"/>
    </para>

    <bridgehead renderas="sect4">Opcionais</bridgehead>
    <para role="optional">
      <xref linkend="linux-pam"/>,
      <xref linkend="mitkrb"/>,
      <xref linkend="mariadb"/> ou <ulink url="http://www.mysql.com/">MySQL</ulink>,
      <xref linkend="openjdk"/>,
      <xref linkend="openldap"/>,
      <xref linkend="postgresql"/>,
      <xref linkend="sqlite"/>,
      <ulink url="https://stuff.mit.edu/afs/net.mit.edu/project/attic/krb4/">krb4</ulink>,
      <ulink url="http://dmalloc.com/">Dmalloc</ulink>,
      <ulink url="https://metacpan.org/pod/Pod::POM::View::Restructured">Pod::POM::View::Restructured</ulink>
      e <ulink url="https://pypi.org/project/Sphinx">Sphinx</ulink>
    </para>

    <para condition="html" role="usernotes">Observações do(a) Usuário(a):
      <ulink url="&blfs-wiki;/cyrus-sasl"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Instalação do Cyrus SASL</title>

    <note>

      <para>

        Esse pacote não suporta construção paralela.

      </para>

    </note>

    <!-- Sem este remendo, ter-se o Sphinx e (ou) o doctools (doctools 
    não testado) no sistema causa um FTBFS quando as páginas de manual 
    são geradas.  A API do Sphinx e do Docutils mudou significantemente 
    entre o Sphinx-{1,2} e o Sphinx-3.0. -->

    <para>

      Primeiro, corrija uma falha de construção se o Sphinx ou o
      <xref role="nodep" linkend="docutils"/> estiverem instalados no sistema:

    </para>

<screen><userinput remap="pre">patch -Np1 -i ../cyrus-sasl-2.1.27-doc_fixes-1.patch</userinput></screen>

    <para>

      Instale o <application>Cyrus SASL</application> executando os 
      seguintes comandos:

    </para>

<screen><userinput>./configure --prefix=/usr        \
            --sysconfdir=/etc    \
            --enable-auth-sasldb \
            --with-dbpath=/var/lib/sasl/sasldb2 \
            --with-sphinx-build=no              \
            --with-saslauthd=/var/run/saslauthd &amp;&amp;
make -j1</userinput></screen>

    <para>

      Esse pacote não vem com uma suíte de teste.  Se você estiver 
      planejando usar o mecanismo de autenticação GSSAPI, [então] 
      teste-o depois que instalar o pacote usando os aplicativos de 
      amostra servidor e cliente que foram construídos na etapa 
      anterior.  Instruções para realizar os testes podem ser 
      encontradas em
<ulink url="&hints-root;/downloads/files/cyrus-sasl.txt"/>.

    </para>

    <para>

      Agora, como o(a) usuário(a)
<systemitem class="username">root</systemitem>:

    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -dm755                          /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/html &amp;&amp;
install -v -m644  saslauthd/LDAP_SASLAUTHD /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;      &amp;&amp;
install -v -m644  doc/legacy/*.html        /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/html &amp;&amp;
install -v -dm700 /var/lib/sasl</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explicações do Comando</title>

    <para>

      <parameter>--with-dbpath=/var/lib/sasl/sasldb2</parameter>: Essa 
      chave força a base de dados <command>sasldb</command> ser criada 
      em <filename class="directory">/var/lib/sasl</filename> em vez de 
      em <filename class="directory">/etc</filename>.

    </para>

    <para>

      <parameter>--with-saslauthd=/var/run/saslauthd</parameter>: Essa 
      chave força o <command>saslauthd</command> a usar o diretório 
      compatível com o FHS
<filename class="directory">/var/run/saslauthd</filename> para dados 
      variáveis em tempo de execução.

    </para>

    <para>

      <parameter>--enable-auth-sasldb</parameter>: Essa chave habilita o 
      backend de autenticação SASLDB.

    </para>

    <para>

      <option>--with-dblib=gdbm</option>: Essa chave força o 
      <application>GDBM</application> ser usado em vez da 
      <application>Berkeley DB</application>.

    </para>

    <para>

      <option>--with-ldap</option>: Essa chave habilita o suporte a 
      <application>OpenLDAP</application>.

    </para>

    <para>

      <option>--enable-ldapdb</option>: Essa chave habilita o backend de 
      autenticação LDAPDB.  Existe uma dependência circular com esse 
      parâmetro.  Veja-se <ulink url="&blfs-wiki;/cyrus-sasl"/> para uma 
      solução para esse problema.

    </para>

    <para>

      <option>--enable-java</option>: Essa chave habilita a compilação 
      das bibliotecas de suporte a <application>Java</application>.

    </para>

    <para>

      <option>--enable-login</option>: Essa opção habilita a 
      autenticação não suportada LOGIN.

    </para>

    <para>

      <option>--enable-ntlm</option>: Essa opção habilita a autenticação 
      não suportada NTLM.

    </para>

    <para>

      <command>install -v -m644 ...</command>: Esses comandos instalam a 
      documentação que não é instalada pelo comando
<command>make install</command>.

    </para>

    <para>

      <command>install -v -m700 -d /var/lib/sasl</command>: Esse 
      diretório precisa existir quando se iniciar o 
      <command>saslauthd</command> ou se usar o plugin sasldb.  Se não 
      for executar o daemon ou usar os plugins, [então] você 
      possivelmente omita a criação desse diretório.

    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring Cyrus SASL</title>

    <sect3 id="cyrus-sasl-config">
      <title>Config Files</title>

      <para>
        <filename>/etc/saslauthd.conf</filename>
        (for <command>saslauthd</command> LDAP configuration) and
        <filename>/etc/sasl2/Appname.conf</filename>
        (where "Appname" is the application defined name of the application)
      </para>

      <indexterm zone="cyrus-sasl cyrus-sasl-config">
        <primary sortas="e-etc-saslauthd.conf">/etc/saslauthd.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Configuration Information</title>

      <para>
        See
        <ulink url="https://www.cyrusimap.org/sasl/sasl/sysadmin.html"/>
        for information on what to include in the application configuration files.
      </para>

      <para>
        See
        <ulink url="file:///usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/LDAP_SASLAUTHD"/>
        for configuring <command>saslauthd</command> with
        <application>OpenLDAP</application>.
      </para>

      <para>
        See
        <ulink url="https://www.cyrusimap.org/sasl/sasl/gssapi.html#gssapi"/>
        for configuring <command>saslauthd</command> with <application>Kerberos</application>.
      </para>

    </sect3>

    <sect3 id="cyrus-sasl-init">
      <title><phrase revision="sysv">Init Script</phrase>
             <phrase revision="systemd">Systemd Unit</phrase></title>

      <para revision="sysv">
        If you need to run the <command>saslauthd</command> daemon at system
        startup, install the <filename>/etc/rc.d/init.d/saslauthd</filename>
        init script included in the
        <xref linkend="bootscripts"/> package using the following command:
      </para>

      <para revision="systemd">
        If you need to run the <command>saslauthd</command> daemon at system
        startup, install the <filename>saslauthd.service</filename> unit
        included in the <xref linkend="systemd-units"/> package using the
        following command:
      </para>

      <indexterm zone="cyrus-sasl cyrus-sasl-init">
        <primary sortas="f-saslauthd">saslauthd</primary>
      </indexterm>

<screen role="root"><userinput>make install-saslauthd</userinput></screen>

      <note>
        <para>
          You'll need to modify
          <filename revision="sysv">/etc/sysconfig/saslauthd</filename>
          <filename revision="systemd">/etc/default/saslauthd</filename>
          and modify the
          <option revision="sysv">AUTHMECH</option>
          <option revision="systemd">MECHANISM</option>
          parameter with your desired authentication mechanism.
          <phrase revision="systemd">The default authentication
          mechanism is "shadow".</phrase>
        </para>
      </note>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Library</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>
          pluginviewer, saslauthd, sasldblistusers2, saslpasswd2 and
          testsaslauthd
        </seg>
        <seg>
          libsasl2.so
        </seg>
        <seg>
          /usr/include/sasl,
          /usr/lib/sasl2,
          /usr/share/doc/cyrus-sasl-&cyrus-sasl-version; and
          /var/lib/sasl
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="pluginviewer">
        <term><command>pluginviewer</command></term>
        <listitem>
          <para>
            is used to list loadable SASL plugins and their properties
          </para>
          <indexterm zone="cyrus-sasl pluginviewer">
            <primary sortas="b-pluginviewer">pluginviewer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="saslauthd">
        <term><command>saslauthd</command></term>
        <listitem>
          <para>
            is the SASL authentication server
          </para>
          <indexterm zone="cyrus-sasl saslauthd">
            <primary sortas="b-saslauthd">saslauthd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sasldblistusers2">
        <term><command>sasldblistusers2</command></term>
        <listitem>
          <para>
            is used to list the users in the SASL password database
            <filename>sasldb2</filename>
          </para>
          <indexterm zone="cyrus-sasl sasldblistusers2">
            <primary sortas="b-sasldblistusers2">sasldblistusers2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="saslpasswd2">
        <term><command>saslpasswd2</command></term>
        <listitem>
          <para>
            is used to set and delete a user's SASL password and
            mechanism specific secrets in the SASL password
            database <filename>sasldb2</filename>
          </para>
          <indexterm zone="cyrus-sasl saslpasswd2">
            <primary sortas="b-saslpasswd2">saslpasswd2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="testsaslauthd">
        <term><command>testsaslauthd</command></term>
        <listitem>
          <para>
            is a test utility for the SASL authentication server
          </para>
          <indexterm zone="cyrus-sasl testsaslauthd">
            <primary sortas="b-testsaslauthd">testsaslauthd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsasl2">
        <term><filename class="libraryfile">libsasl2.so</filename></term>
        <listitem>
          <para>
            is a general purpose authentication library for server
            and client applications
          </para>
          <indexterm zone="cyrus-sasl libsasl2">
            <primary sortas="c-libsasl2">libsasl2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
