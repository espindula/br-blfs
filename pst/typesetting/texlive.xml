<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- utah -->
  <!ENTITY texlive-download-http "https://ftp.math.utah.edu/pub/tex/historic/systems/texlive/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-md5sum        "4f05bbd93004175275f50215a4c51608">
  <!ENTITY texlive-size          "65 MB">

  <!ENTITY texlive-buildsize      "8,0 GB incluindo a transferência adicional e os testes; 7,3 GB instalados">
  <!ENTITY texlive-time           "3,9 UPC incluindo a transferência adicional e os testes, construindo com
paralelismo=4">

  <!-- utah -->
  <!ENTITY texlive-texmf-download-http "https://ftp.math.utah.edu/pub/tex/historic/systems/texlive/&texlive-year;/texlive-&texlive-version;-texmf.tar.xz">
  <!ENTITY texlive-texmf-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texmf-version;-texmf.tar.xz">
  <!ENTITY texlive-texmf-md5sum        "9806803f703b6ce4d9845c46806a7a08">
  <!ENTITY texlive-texmf-size          "3,4 GB">

  <!ENTITY texlive-tlpdb-download-http "https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/&texlive-year;/texlive-&tex-tlpdb-version;-tlpdb-full.tar.gz">
  <!ENTITY texlive-tlpdb-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&tex-tlpdb-version;-tlpdb-full.tar.gz">
  <!ENTITY texlive-tlpdb-md5sum        "1084c37c6775b567ed7babd71e612f75">
  <!ENTITY texlive-tlpdb-size          "3,1 MB">

]>


<sect1 id="texlive" xreflabel="texlive-&texlive-version;">
  <?dbhtml filename="texlive.html"?>


  <title>texlive-&texlive-version;-source</title>

  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introdução ao TeX Live a partir do fonte</title>

    <note>
      <para>
        <!-- the chinese mirros do not use a 'historic' subdirectory. -->
De acordo com <ulink url="https://www.tug.org/historic/"/> o site mestre na
França suporta somente FTP e rsync. Agora que o FTP está geralmente
obsoleto, essa página tem links para espelhos, alguns dos quais suportam
HTTPS, por exemplo, em Utah e Chemntiz, bem como na China. Se você preferir
usar um espelho diferente a partir dos links de exemplo aqui, você precisará
navegar até systems/historic/texlive/&texlive-year; ou
systems/texlive/&texlive-year; conforme o caso.
        
      </para>
    </note>

    <para>
      A maior parte do TeX Live pode ser construída a partir do fonte sem uma
instalação pré existente, mas o <application>xindy</application> (para
indexação) precisa de versões funcionais de <command>latex</command> e
<command>pdflatex</command> quando o configure for executado e a suíte de
teste e a instalação do <command>asy</command> (para gráficos vetoriais)
falharão se o TeX ainda não tiver sido instalado. Além disso,
<application>biber</application> não é fornecido no fonte do
<application>texlive</application> e a versão de
<application>dvisvgm</application> na árvore do
<application>texlive</application> não pode ser construída se bibliotecas de
sistema compartilhadas forem usadas.
    </para>

      <para>
      </para>
    <para>
      Todos esses pacotes são tratados em nas próprias páginas deles e podem ser
construídos depois de se instalar esse pacote. Se ainda não tiver feito
isso, você deveria iniciar em <xref linkend="tex-path"/>, de forma que os
comandos finais para inicializar a nova instalação sejam encontrados.
    </para>

    &lfs113_checked;

    <bridgehead renderas="sect3">Informação do Pacote</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Transferência (HTTP): <ulink url="&texlive-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Transferência (FTP): <ulink url="&texlive-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Soma de verificação MD5 da transferência: &texlive-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Tamanho da transferência: &texlive-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Espaço em disco estimado exigido: &texlive-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Tempo de construção estimado: &texlive-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Transferências Adicionais Exigidas</bridgehead>

      <para>
        Grande parte do ambiente do texlive (incluindo conjuntos de comandos
sequenciais, documentação, fontes e vários outros arquivos) não faz parte do
tarball do fonte. Você precisa baixá-lo separadamente. Isso te dará todos os
arquivos adicionais fornecidos por uma instalação completa da versão
binária; não existe uma maneira realista de restringir quais partes serão
instaladas.
      </para>

      <para>
        Devido ao tamanho desse pacote, é improvável que seja espelhado por espelhos
do BLFS. Em caso de dificuldade, vá até http://www.ctan.org/mirrors/ para
encontrar um espelho mais acessível.
      </para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Transferência (HTTP): <ulink url="&texlive-texmf-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Transferência (FTP): <ulink url="&texlive-texmf-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Soma de verificação MD5 da transferência: &texlive-texmf-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Tamanho da transferência: &texlive-texmf-size;
        </para>
      </listitem>
    </itemizedlist>

      <para>
        A partir do ano de 2019, a base de dados tlpdb dos pacotes do texlive não
mais é instalada com o fonte. Mas, o <command>texdoc</command> precisa de um
arquivo de cache derivado a partir desse (e criará o cache na primeira
execução dele).
      </para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Transferência (HTTP): <ulink url="&texlive-tlpdb-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Transferência (FTP): <ulink url="&texlive-tlpdb-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Soma de verificação MD5 da transferência: &texlive-tlpdb-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Tamanho da transferência: &texlive-tlpdb-size;
        </para>
      </listitem>


    <!--  <listitem>

        <para>
          Required patch: <ulink url=
          "&patch-root;/texlive-&texlive-version;-upstream_fixes-1.patch"/>
        </para>
      </listitem>-->
</itemizedlist>

    <bridgehead renderas="sect3">Dependências do TeX Live a partir do fonte</bridgehead>

    <bridgehead renderas="sect4">Recomendadas</bridgehead>
    <para role="recommended">
      <xref linkend="x-window-system"/>
    </para>

    
    <!-- text for recommended libraries -->
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texrecommendlibs.xml"/>



    <!-- the following ensures jhalfs will set paths before running texlive -->
<para role="recommended">
      Além disso, as instruções abaixo assumem que você está usando o esquema
descrito em <xref linkend="tex-path"/>.
    </para>

    <bridgehead renderas="sect4">Opcionais</bridgehead>
    
    <!-- text for optional deps -->
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texoptional.xml"/>

    <bridgehead renderas="sect4">Dependências de tempo de execução</bridgehead>
    
    <!-- text for runtime deps, shared with tl-installer -->
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texruntime.xml"/>

    <para condition="html" role="usernotes">Observações de Usuário(a): <ulink url="&blfs-wiki;/texlive"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Instalação do TeX Live</title>

    <para>
      Instale o TeX Live executando os seguintes comandos:
    </para>

    <caution>
      <para>
        Se você desejar atualizar para o <application>texlive</application> atual em
um sistema mais antigo, onde pacotes extras
(<application>asymptote</application>, <application>biber</application>,
<application>dvisvgm</application> ou <application>xindy</application>)
tenham sido instalados, você precisará reinstalá-los, bem como corrigir teu
<literal>PATH</literal> para <literal>$TEXLIVE_PREFIX</literal>.
      </para>
    </caution>

    <para>
      As bibliotecas compartilhadas serão instaladas em um diretório do
texlive. Como o(a) usuário(a) <systemitem
class="username">root</systemitem>, adicione-o ao teu
<filename>/etc/ld.so.conf</filename>:
    </para>

<screen role="root"><userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; EOF
<literal># Inicia adição do texlive

$TEXLIVE_PREFIX/lib

# Termina adição do texlive</literal>
EOF</userinput></screen>

    <note>
      <para>
        Uma instalação bem-sucedida requer que alguns comandos do texlive sejam
executados como o(a) usuário(a) root, de forma que nós exportaremos a
variável TEXARCH para permitir que o(a) <systemitem
class="username">root</systemitem> a use.
      </para>
    </note>

    <para>
      Agora, como um(a) usuário(a) normal:
    </para>

<screen><userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;

mkdir texlive-build &amp;&amp;
cd    texlive-build &amp;&amp;

../configure                                      \
    --prefix=$TEXLIVE_PREFIX                      \
    --bindir=$TEXLIVE_PREFIX/bin/$TEXARCH         \
    --datarootdir=$TEXLIVE_PREFIX                 \
    --includedir=$TEXLIVE_PREFIX/include          \
    --infodir=$TEXLIVE_PREFIX/texmf-dist/doc/info \
    --libdir=$TEXLIVE_PREFIX/lib                  \
    --mandir=$TEXLIVE_PREFIX/texmf-dist/doc/man   \
    --disable-native-texlive-build                \
    --disable-static --enable-shared              \
    --disable-dvisvgm                             \
    --with-system-cairo                           \
    --with-system-fontconfig                      \
    --with-system-freetype2                       \
    --with-system-gmp                             \
    --with-system-graphite2                       \
    --with-system-harfbuzz                        \
    --with-system-icu                             \
    --with-system-libgs                           \
    --with-system-libpaper                        \
    --with-system-libpng                          \
    --with-system-mpfr                            \
    --with-system-pixman                          \
    --with-system-zlib                            \
    --with-banner-add=" - BLFS" &amp;&amp;

make</userinput></screen>

    <para>
      Para testar os resultados, emita: <command>make check</command>.
    </para>

    <para>
      Agora, como o(a) usuário(a) <systemitem class="username">root</systemitem>:
    </para>


<screen role="root"><!-- Editors, you can run 'make texlinks' in a DESTDIR by passing
DESTDIR#some/where -->
<userinput>make install-strip &amp;&amp;
/sbin/ldconfig     &amp;&amp;
make texlinks      &amp;&amp;
mkdir -pv                                $TEXLIVE_PREFIX/tlpkg/TeXLive/ &amp;&amp;
install -v -m644 ../texk/tests/TeXLive/* $TEXLIVE_PREFIX/tlpkg/TeXLive/ &amp;&amp;
tar -xf ../../texlive-&tex-tlpdb-version;-tlpdb-full.tar.gz -C $TEXLIVE_PREFIX/tlpkg</userinput></screen>

    <note>
      <para>
        Execute <command>make texlinks</command> somente uma vez. Se for executado
novamente, poderá mudar todos os links simbólicos do aplicativo, de forma
que eles apontem para eles mesmos e sejam inúteis.
      </para>
    </note>

    <para>
      Agora instale os arquivos adicionais como o(a) usuário(a) <systemitem
class="username">root</systemitem>:
    </para>


<screen role="root"><!-- if texmf does not need to be patched, remove &amp;&amp; from first line,
 close userinput, screen, comment pushd, patch, popd -->
<userinput>tar -xf ../../texlive-&texmf-version;-texmf.tar.xz -C $TEXLIVE_PREFIX --strip-components=1</userinput></screen>

    <para>
      Foi estabelecido pelo Debian que os conjuntos de comandos sequenciais do
<command>python</command> em <filename
class="directory">latex-make</filename> funcionarão com o
<command>python3</command>, de forma que atualize-os para invocar isso
executando o seguinte comando como o(a) usuário(a) <systemitem
class="username">root</systemitem>:
    </para>

<screen role="root"><userinput>for F in $TEXLIVE_PREFIX/texmf-dist/scripts/latex-make/*.py ; do
  sed -i 's%/usr/bin/env python%/usr/bin/python3%' $F
done
</userinput></screen>

    <para>
      Ainda como o(a) usuário(a) <systemitem class="username">root</systemitem>,
inicialize o novo sistema (os comandos <command>fmtutil-sys --all</command>
e <command>mtxrun --generate</command> produzirão um
<emphasis>monte</emphasis> de saída gerada):
    </para>



<screen role="root"><!-- Editors, fmtutil-sys and mtxrun \-\-generate can apparently only be run on
a real install, as root.  But mktexlsr can be run in a DESTDIR with
cd /YOUR/TEXMF/ROOT ; ls -LAR ./ >
ls-R -->
<userinput>mktexlsr &amp;&amp;
fmtutil-sys --all &amp;&amp;
mtxrun --generate</userinput></screen>

    <para>
      Agora você pode prosseguir para <xref linkend="asymptote"/>, <xref
linkend="biber"/>, <xref linkend="dvisvgm"/> e (ou) <xref linkend="xindy"/>
se desejar instalá-los.
    </para>

  </sect2>

  <sect2 role="commands">
    <title>Explicações do Comando</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-prefix.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-lib.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-shared.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-system.xml"/>


    <!--
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-xpdf.xml"/>
-->
<para>
      <command>--disable-dvisvgm</command>: Conforme observado acima, a versão
enviada do dvisvgm, que tem arquivos modificados de configuração, não pode
ser construída com bibliotecas de sistema compartilhadas.
    </para>

    <para>
      <option>--without-x</option>: use isso se você não tiver o Xorg instalado.
    </para>

    <para>
      <command>/sbin/ldconfig</command>: isso tem que ser executado aqui, de forma
que <command>make texlinks</command> possa usar kpsewhich.
    </para>

    <para>
      <command>make texlinks</command> : isso executa o conjunto de comandos
sequenciais texlinks.sh para criar links simbólicos de formats para
engines. Na prática, vários dos alvos, como o <command>xetex</command>,
agora são binários separados e para esses ele informará "file already
exists".
    </para>

    <para>
      <command>tar -xf texlive-&texmf-version;-texmf.tar.xz -C $TEXLIVE_PREFIX
--strip-components=1</command>: o tarball contém os arquivos para o
diretório texmf-dist e, devido ao tamanho dele, nós não queremos desperdiçar
tempo e espaço desempacotando-o e depois copiando os arquivos.
    </para>

    <para>
      <command>install -v -m644 ../texk/tests/TeXLive/*
$TEXLIVE_PREFIX/tlpkg/TeXLive/</command>: Isso coloca os módulos do Perl
<filename>TLConfig.pm</filename> e <filename>TLUtils.pm</filename> no
diretório onde o instalador do binário os coloca - está no início do PATH
@INC@ do Perl dentro do texlive quando instalado usando as chaves de
configuração acima. Sem esses módulos, o texlive não é usável.
    </para>

    <para>
      <command>mktexlsr</command>: Crie um arquivo <filename>ls-R</filename> que
lista o que foi instalado - isso é usado pelo kpathsea para encontrar
arquivos.
    </para>

    <para>
      <command>fmtutil-sys --all</command>: Isso inicializa os formatos do TeX,
bases Metafont e memorandos Metapost.
    </para>

    <para>
      <command>mtxrun --generate</command>: Isso inicializa o sistema ConTeXt.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Conteúdo</title>

    <segmentedlist>
      <segtitle>Aplicativos Instalados</segtitle>
      <segtitle>Bibliotecas Instaladas</segtitle>
      <segtitle>Diretórios Instalados</segtitle>

      <seglistitem>
        <seg>Mais que trezentos (300) binários e links simbólicos para conjuntos de
comandos sequenciais</seg>
        <seg>libkpathsea.so, libptexenc.so, libsynctex.so, libtexlua52.so,
libtexluajit.so
        </seg>
        <seg>$TEXLIVE_PREFIX/bin, $TEXLIVE_PREFIX/include, $TEXLIVE_PREFIX/lib,
$TEXLIVE_PREFIX/texmf-dist
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descrições Curtas</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="texlive-programs">
        <term><command>TeXprograms</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">Aplicativos do TeX Live</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe para procurar um arquivo em uma lista de diretórios e é
usado pelo <command>kpsewhich</command>
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            é uma biblioteca para pTeX japonês (publicação de TeX)
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsynctex">
        <term><filename class="libraryfile">libsynctex.so</filename></term>
        <listitem>
          <para>
            é a biblioteca do analisador SyncTeX (Synchronize TeXnology)
          </para>
          <indexterm zone="texlive libsynctex">
            <primary sortas="c-libsynctex">libsynctex.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libtexlua52">
        <term><filename class="libraryfile">libtexlua52.so</filename></term>
        <listitem>
          <para>
            fornece Lua 5.2, modificado para uso com o LuaTeX
          </para>
          <indexterm zone="texlive libtexlua52">
            <primary sortas="c-libtexlua52">libtexlua52.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libtexluajit">
        <term><filename class="libraryfile">libtexluajit.so</filename></term>
        <listitem>
          <para>
            fornece LuaJIT, modificado para uso com o LuaJITTeX
          </para>
          <indexterm zone="texlive libtexluajit">
            <primary sortas="c-libtexluajit">libtexluajit.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
